require_relative 'publisher'

module QAT
  module Reporter
    class OpenTest
      # QAT::Reporter::Xray configuration module
      module Config
        class << self

          attr_accessor :session_id, :open_test_url, :publisher, :session_label, :environment, :actor_tags, :tests

          DEFAULT_PUBLISHER = 'hosted'
          # Returns the session label
          def tests
            @tests
          end
          
          def session_label
            @session_label
          end

          # Returns the environment
          def environment
            @environment
          end

          # Returns the actor tags
          def actor_tags
            @actor_tags
          end
          
          # Returns the session_id
          def session_id
            @session_id
          end

          # Returns the open_test_url
          def open_test_url
            @open_test_url
          end
          
          def publisher=(publisher)
            @publisher = publisher
          end

          def publisher
            @publisher
          end
        end
      end

      class << self
        # Configures the QAT::Formatter::Xray
        def configure(&block)
          yield Config

          QAT::Reporter::OpenTest::Config.publisher = QAT::Reporter::OpenTest::Publisher.const_get(DEFAULT_PUBLISHER.capitalize).new
        end
      end
    end
  end
end
